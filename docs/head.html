<!-- Favicons -->
<link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
<link rel="manifest" href="favicon/site.webmanifest">

<!-- Cookie Consent CSS + JS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" />
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js"></script>

<script>
window.addEventListener("load", function(){
  window.cookieconsent.initialise({
    palette: {
      popup: { background: "#000" },
      button: { background: "#f1d600" }
    },
    theme: "classic",
    type: "opt-in",   // IMPORTANT: gives Accept/Decline
    content: {
      message: "We use cookies (Google Analytics) to improve your experience.",
      allow: "Accept",
      deny: "Decline",
      link: "Learn more",
      href: "/privacy.html"
    },
    onInitialise: function (status) {
      if (status == "allow") {
        enableAnalytics();
      }
    },
    onStatusChange: function(status) {
      if (status == "allow") {
        enableAnalytics();
      } else {
        disableAnalytics();
      }
    }
  });
});

// Function to load Google Analytics dynamically after consent
function enableAnalytics() {
  if (!window.gaEnabled) {
    window.gaEnabled = true;
    var script = document.createElement("script");
    script.src = "https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"; // replace with your GA4 ID
    script.async = true;
    document.head.appendChild(script);

    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    window.gtag = gtag;
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXXXXX');
  }
}

// Optional: prevent GA if user declines (no script loaded, so nothing happens)
function disableAnalytics() {
  console.log("Analytics disabled by user choice.");
}
</script>
