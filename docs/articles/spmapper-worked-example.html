<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Worked example • spmapper</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Worked example">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js"></script><script>
window.addEventListener("load", function() {
  window.cookieconsent.initialise({
    palette: {
      popup: { background: "#000" },
      button: { background: "#f1d600", color: "#000" }
    },
    theme: "classic",
    type: "opt-in",
    content: {
      message: "This site uses cookies for analytics. Do you accept?",
      allow: "Accept",
      deny: "Refuse",
      link: "https://www.ceh.ac.uk/about-us/policies/privacy-notice",
      href: "https://www.ceh.ac.uk/about-us/policies/privacy-notice"
    },
    onInitialise: function(status) {
      if (this.hasConsented()) {
        loadGoogleAnalytics();
      }
    },
    onStatusChange: function(status, chosenBefore) {
      if (this.hasConsented()) {
        loadGoogleAnalytics();
      }
    }
  });
});

// Function to load Google Analytics only after consent
function loadGoogleAnalytics() {
  if (window.gaLoaded) return; // prevent double-loading
  window.gaLoaded = true;

  // Replace 'G-XXXXXXXXXX' with your Google Analytics Measurement ID
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'G-XXXXXXXXXX', 'auto');
  ga('send', 'pageview');
}
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">spmapper</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NERC-CEH/spmapper-pkg/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Worked example</h1>
            
            <h4 data-toc-skip class="date">2025-09-04</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/NERC-CEH/spmapper-pkg/blob/HEAD/vignettes/spmapper-worked-example.Rmd" class="external-link"><code>vignettes/spmapper-worked-example.Rmd</code></a></small>
      <div class="d-none name"><code>spmapper-worked-example.Rmd</code></div>
    </div>

    
    
<p><br></p>
<div class="section level4">
<h4 id="this-worked-example-describes-the-use-of-spmapper-and-its-core-functions-">This worked example describes the use of <em>spmapper</em> and its
core functions.<a class="anchor" aria-label="anchor" href="#this-worked-example-describes-the-use-of-spmapper-and-its-core-functions-"></a>
</h4>
<p><br></p>
</div>
<div class="section level2">
<h2 id="install-spmapper">Install <em>spmapper</em><a class="anchor" aria-label="anchor" href="#install-spmapper"></a>
</h2>
<p>You can install <em>spmapper</em> directly from within <em>R</em>
(recommended) with the below code, or via download from the github
repository, linked via the “Download spmapper” box on the homepage of
this website.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install spmapper from within R </span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"NERC-CEH/spmapper-pkg"</span><span class="op">)</span> </span>
<span></span>
<span><span class="co">## If you have downloaded the package files directly from the github repository,  you will first need to install the package by modifying the below example code</span></span>
<span><span class="co"># install.packages("C:/Users/myusername/Downloads/spmapper-pkg_[0.1.0].tar.gz", repos = NULL, type = "source") # with the correct file path and version name etc</span></span>
<span></span>
<span><span class="co"># load the package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nerc-ceh.github.io/spmapper-pkg">spmapper</a></span><span class="op">)</span> </span></code></pre></div>
</div>
<div class="section level2">
<h2 id="load-packages-and-functions">
<strong>Load packages and functions</strong><a class="anchor" aria-label="anchor" href="#load-packages-and-functions"></a>
</h2>
<p>Load packages needed for tool functions. Check you have all necessary
packages installed.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load required packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nerc-ceh.github.io/spmapper-pkg">spmapper</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span> </span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/" class="external-link">knitr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/rnaturalearth/" class="external-link">rnaturalearth</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sjmgarnier.github.io/viridis/" class="external-link">viridis</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com" class="external-link">patchwork</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Define tool directory path - this is important to source the package functions, and for those functions to locate the input data!</span></span>
<span><span class="va">tooldir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"spmapper"</span><span class="op">)</span> <span class="co"># automatically find and define your file path - but do check the path is correct</span></span>
<span></span>
<span><span class="co"># tooldir &lt;- file.path(".../spmapper") # alternatively, modify here to your package files directory if you have installed the package elsewhere</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load package functions</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"R"</span>, <span class="st">"functions_preymodel.R"</span>, package <span class="op">=</span> <span class="st">"spmapper"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"R"</span>, <span class="st">"functions_spmapper.R"</span>, package <span class="op">=</span> <span class="st">"spmapper"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"R"</span>, <span class="st">"functions_fpudoverlap.R"</span>, package <span class="op">=</span> <span class="st">"spmapper"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"R"</span>, <span class="st">"functions_spmapplot.R"</span>, package <span class="op">=</span> <span class="st">"spmapper"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><br><br></p>
</div>
<div class="section level2">
<h2 id="worked-example">
<strong>Worked example</strong><a class="anchor" aria-label="anchor" href="#worked-example"></a>
</h2>
<p><br></p>
<div class="section level4">
<h4 id="specify-user-polygons">
<strong>Specify user polygon(s)</strong><a class="anchor" aria-label="anchor" href="#specify-user-polygons"></a>
</h4>
<div class="section level5">
<h5 id="users-can-specify-multiple-polygonmultipolygon-objects-and-apply-the-rest-of-the-example-code-to-compare-prey-consumption-across-areas--spmapper-functions-are-capable-of-handling-multipolygon-objects-">Users can specify multiple polygon/multipolygon objects and apply
the rest of the example code to compare prey consumption across areas.
<em>spmapper</em> functions are capable of handling multipolygon
objects.<a class="anchor" aria-label="anchor" href="#users-can-specify-multiple-polygonmultipolygon-objects-and-apply-the-rest-of-the-example-code-to-compare-prey-consumption-across-areas--spmapper-functions-are-capable-of-handling-multipolygon-objects-"></a>
</h5>
</div>
<div class="section level5">
<h5 id="users-are-reminded-to-define-the-coordinate-reference-system-crs-of-their-loaded-shapefiles--spmapper-reprojects-user-polygons-to-align-to-the-prey-consumption-maps--spmapper-includes-a-function-to-plot-prey-consumption-maps-with-the-user-polygons-overlaid-see-below-">
<strong>Users are reminded to define the Coordinate Reference System
(CRS) of their loaded shapefiles.</strong> <em>spmapper</em> reprojects
user polygons to align to the prey consumption maps. <em>spmapper</em>
includes a function to plot prey consumption maps with the user polygons
overlaid (see below).<a class="anchor" aria-label="anchor" href="#users-are-reminded-to-define-the-coordinate-reference-system-crs-of-their-loaded-shapefiles--spmapper-reprojects-user-polygons-to-align-to-the-prey-consumption-maps--spmapper-includes-a-function-to-plot-prey-consumption-maps-with-the-user-polygons-overlaid-see-below-"></a>
</h5>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># Specify shapefile/s</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>fppolys <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(<span class="fu">file.path</span>()) <span class="co"># Add your filepath/s here. </span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="do">## Users must define the CRS of their loaded shapefile for spmapper to function!</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>fppolys <span class="ot">&lt;-</span> <span class="fu">st_crs</span>([...]) <span class="co"># define source file CRS</span></span></code></pre></div>
<p><br></p>
</div>
<div class="section level5">
<h5 id="example-data-presented-uk-offshore-wind-farm-footprints-of-production-planned-construction-and-approved-statuses-collated-for-the-european-marine-observation-and-data-network-via-emodnet-cetmar-2024--offshore-electricity-transmission-ofto-polygons-excluded-">
<strong>Example data presented</strong>: UK offshore wind farm
footprints of ‘production’, ‘planned’, ‘construction’ and ‘approved’
statuses, collated for the European Marine Observation and Data Network
(via EMODnet; CETMAR, 2024). Offshore electricity transmission (OFTO)
polygons excluded.<a class="anchor" aria-label="anchor" href="#example-data-presented-uk-offshore-wind-farm-footprints-of-production-planned-construction-and-approved-statuses-collated-for-the-european-marine-observation-and-data-network-via-emodnet-cetmar-2024--offshore-electricity-transmission-ofto-polygons-excluded-"></a>
</h5>
<p><img src="spmapper-worked-example_files/figure-html/unnamed-chunk-7-1.png" width="2500"></p>
<p><br><br></p>
</div>
</div>
<div class="section level3">
<h3 id="run-primary-function-spmapper---produces-prey-consumption-maps-for-chosen-species-and-optionally-extracts-quantities-within-user-specified-polygons-if-provided-">
<strong>Run primary function <em>spmapper()</em> </strong> -
produces prey consumption maps for chosen species and optionally
extracts quantities within user-specified polygons, if provided.<a class="anchor" aria-label="anchor" href="#run-primary-function-spmapper---produces-prey-consumption-maps-for-chosen-species-and-optionally-extracts-quantities-within-user-specified-polygons-if-provided-"></a>
</h3>
<p><br></p>
<div class="section level5">
<h5 id="specify-species-of-interest-with-spname-optional-user-supplied-polygons-with-fppolys-and-the-directory-to-tool-data-with-tooldir-defined-earlier-under-load-packages-and-functions--the-object-returned-e-g--out_kitt-is-a-list-object-of-the-various-inputs-quantities-and-output-prey-consumption-maps-">Specify species of interest with “spname =”, optional user-supplied
polygons with “fppolys =”, and the directory to tool data with “tooldir
=” (defined earlier under ‘Load packages and functions’). The object
returned (<em>e.g.</em> out_kitt) is a list object of the various
inputs, quantities, and output prey consumption maps.<a class="anchor" aria-label="anchor" href="#specify-species-of-interest-with-spname-optional-user-supplied-polygons-with-fppolys-and-the-directory-to-tool-data-with-tooldir-defined-earlier-under-load-packages-and-functions--the-object-returned-e-g--out_kitt-is-a-list-object-of-the-various-inputs-quantities-and-output-prey-consumption-maps-"></a>
</h5>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out_kitt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spmapper.html">spmapper</a></span><span class="op">(</span>spname <span class="op">=</span> <span class="st">"Kittiwake"</span>, fppolys <span class="op">=</span> <span class="va">fppolys</span>, tooldir <span class="op">=</span> <span class="va">tooldir</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## |---------|---------|---------|---------|=========================================                                          </span></span></code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out_cogu</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spmapper.html">spmapper</a></span><span class="op">(</span>spname <span class="op">=</span> <span class="st">"Guillemot"</span>, fppolys <span class="op">=</span> <span class="va">fppolys</span>, tooldir <span class="op">=</span> <span class="va">tooldir</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## |---------|---------|---------|---------|=========================================                                          </span></span></code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out_razo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spmapper.html">spmapper</a></span><span class="op">(</span>spname <span class="op">=</span> <span class="st">"Razorbill"</span>, fppolys <span class="op">=</span> <span class="va">fppolys</span>, tooldir <span class="op">=</span> <span class="va">tooldir</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## |---------|---------|---------|---------|=========================================                                          </span></span></code></pre>
<p><br><br></p>
</div>
</div>
<div class="section level3">
<h3 id="visualise-prey-consumption-maps-with-optional-input-polygons-overlaid-using-spmapplot">
<strong>Visualise prey consumption maps with optional input polygons
overlaid, using <em>spmapplot()</em> </strong><a class="anchor" aria-label="anchor" href="#visualise-prey-consumption-maps-with-optional-input-polygons-overlaid-using-spmapplot"></a>
</h3>
<p><br></p>
<div class="section level5">
<h5 id="spmapplot-takes-two-arguments-the-first-is-a-prey-consumption-map-raster-generated-by-spmapper-contained-in-list-outputs-in-the-form-out_kittprey_cons_map-the-second-optional-argument-is-a-polygon-object-e-g--the-users-polygons-fppolys">
<em>spmapplot()</em> takes two arguments, the first is a prey
consumption map (raster, generated by <em>spmapper()</em>, contained in
list outputs in the form out_kitt$<em>prey_cons_map</em>), the second
optional argument is a polygon object (<em>e.g.</em> the user’s
polygons, <em>fppolys</em>)<a class="anchor" aria-label="anchor" href="#spmapplot-takes-two-arguments-the-first-is-a-prey-consumption-map-raster-generated-by-spmapper-contained-in-list-outputs-in-the-form-out_kittprey_cons_map-the-second-optional-argument-is-a-polygon-object-e-g--the-users-polygons-fppolys"></a>
</h5>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot all species prey consumption maps </span></span>
<span><span class="op">(</span><span class="fu"><a href="../reference/spmapplot.html">spmapplot</a></span><span class="op">(</span><span class="va">out_kitt</span><span class="op">$</span><span class="va">prey_cons_map</span>, <span class="va">fppolys</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Kittiwake"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="op">(</span><span class="fu"><a href="../reference/spmapplot.html">spmapplot</a></span><span class="op">(</span><span class="va">out_cogu</span><span class="op">$</span><span class="va">prey_cons_map</span>, <span class="va">fppolys</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Guillemot"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="op">(</span><span class="fu"><a href="../reference/spmapplot.html">spmapplot</a></span><span class="op">(</span><span class="va">out_razo</span><span class="op">$</span><span class="va">prey_cons_map</span>, <span class="va">fppolys</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Razorbill"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">patchwork</span><span class="fu">::</span><span class="fu"><a href="https://patchwork.data-imaginist.com/reference/plot_layout.html" class="external-link">plot_layout</a></span><span class="op">(</span>ncol <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p><img src="spmapper-worked-example_files/figure-html/unnamed-chunk-9-1.png" width="4500"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Or plot a single species map, e.g. Razorbill</span></span>
<span><span class="fu"><a href="../reference/spmapplot.html">spmapplot</a></span><span class="op">(</span><span class="va">out_razo</span><span class="op">$</span><span class="va">prey_cons_map</span>, <span class="va">fppolys</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Razorbill"</span><span class="op">)</span></span></code></pre></div>
<p><br></p>
</div>
</div>
<div class="section level3">
<h3 id="visualise-prey-mass-estimates">
<strong>Visualise prey mass estimates</strong><a class="anchor" aria-label="anchor" href="#visualise-prey-mass-estimates"></a>
</h3>
<div class="section level5">
<h5 id="the-following-code-plots-the-distribution-of-prey-mass-estimates-produced-by-spmapper-and-annotates-the-baseline-estimate-with-a-dashed-line-">The following code plots the distribution of prey mass estimates
produced by <em>spmapper()</em>, and annotates the baseline estimate
with a dashed line.<a class="anchor" aria-label="anchor" href="#the-following-code-plots-the-distribution-of-prey-mass-estimates-produced-by-spmapper-and-annotates-the-baseline-estimate-with-a-dashed-line-"></a>
</h5>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">blki_p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">out_kitt</span><span class="op">$</span><span class="va">allbirds_prey_sim</span><span class="op">)</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">out_kitt</span><span class="op">$</span><span class="va">allbirds_prey_sim</span><span class="op">/</span><span class="fl">1000</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">50</span>, color <span class="op">=</span> <span class="st">"gray10"</span>, fill <span class="op">=</span> <span class="st">"skyblue"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">out_kitt</span><span class="op">$</span><span class="va">allbirds_prey_est</span><span class="op">/</span><span class="fl">1000</span>, color <span class="op">=</span> <span class="st">"gray10"</span>, linetype <span class="op">=</span> <span class="st">"longdash"</span>, linewidth <span class="op">=</span> <span class="fl">1.1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Prey consumption mass, t"</span>, y <span class="op">=</span> <span class="st">"Frequency"</span>, title <span class="op">=</span> <span class="st">"Kittiwake"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cogu_p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">out_cogu</span><span class="op">$</span><span class="va">allbirds_prey_sim</span><span class="op">)</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">out_cogu</span><span class="op">$</span><span class="va">allbirds_prey_sim</span><span class="op">/</span><span class="fl">1000</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">50</span>, color <span class="op">=</span> <span class="st">"gray10"</span>, fill <span class="op">=</span> <span class="st">"skyblue"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">out_cogu</span><span class="op">$</span><span class="va">allbirds_prey_est</span><span class="op">/</span><span class="fl">1000</span>, color <span class="op">=</span> <span class="st">"gray10"</span>, linetype <span class="op">=</span> <span class="st">"longdash"</span>, linewidth <span class="op">=</span> <span class="fl">1.1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Prey consumption mass, t"</span>, y <span class="op">=</span> <span class="st">"Frequency"</span>, title <span class="op">=</span> <span class="st">"Guillemot"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">razo_p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">out_razo</span><span class="op">$</span><span class="va">allbirds_prey_sim</span><span class="op">)</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">out_razo</span><span class="op">$</span><span class="va">allbirds_prey_sim</span><span class="op">/</span><span class="fl">1000</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">50</span>, color <span class="op">=</span> <span class="st">"gray10"</span>, fill <span class="op">=</span> <span class="st">"skyblue"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">out_razo</span><span class="op">$</span><span class="va">allbirds_prey_est</span><span class="op">/</span><span class="fl">1000</span>, color <span class="op">=</span> <span class="st">"gray10"</span>, linetype <span class="op">=</span> <span class="st">"longdash"</span>, linewidth <span class="op">=</span> <span class="fl">1.1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Prey consumption mass, t"</span>, y <span class="op">=</span> <span class="st">"Frequency"</span>, title <span class="op">=</span> <span class="st">"Razorbill"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="op">(</span><span class="va">blki_p</span> <span class="op">+</span> <span class="va">cogu_p</span> <span class="op">+</span> <span class="va">razo_p</span><span class="op">)</span> </span></code></pre></div>
<p><img src="spmapper-worked-example_files/figure-html/unnamed-chunk-11-1.png" width="5000"></p>
<p><br></p>
</div>
</div>
<div class="section level3">
<h3 id="view-output-tables">
<strong>View output tables</strong><a class="anchor" aria-label="anchor" href="#view-output-tables"></a>
</h3>
<div class="section level5">
<h5 id="the-folowing-code-produces-a-table-of-prey-mass-consumption-kg-estimates-for-each-species--estimate-refers-to-the-baseline-estimate-ci_lower-is-the-lower-confidence-interval-2-5-and-ci_upper-is-the-upper-confidence-interval-97-5-">The folowing code produces a table of prey mass consumption (kg)
estimates for each species. <em>Estimate</em> refers to the baseline
estimate, <em>CI_Lower</em> is the lower confidence interval (2.5%) and
<em>CI_Upper</em> is the upper confidence interval (97.5%).<a class="anchor" aria-label="anchor" href="#the-folowing-code-produces-a-table-of-prey-mass-consumption-kg-estimates-for-each-species--estimate-refers-to-the-baseline-estimate-ci_lower-is-the-lower-confidence-interval-2-5-and-ci_upper-is-the-upper-confidence-interval-97-5-"></a>
</h5>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tab_kitt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Species <span class="op">=</span> <span class="st">"Kittiwake"</span>,</span>
<span>  Estimate <span class="op">=</span> <span class="va">out_kitt</span><span class="op">$</span><span class="va">allbirds_prey_est</span>, </span>
<span>  CI_Lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">out_kitt</span><span class="op">$</span><span class="va">allbirds_prey_sim</span>, <span class="fl">0.025</span><span class="op">)</span><span class="op">)</span>, </span>
<span>  CI_Upper <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">out_kitt</span><span class="op">$</span><span class="va">allbirds_prey_sim</span>, <span class="fl">0.975</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tab_cogu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Species <span class="op">=</span> <span class="st">"Guillemot"</span>,</span>
<span>  Estimate <span class="op">=</span> <span class="va">out_cogu</span><span class="op">$</span><span class="va">allbirds_prey_est</span>, </span>
<span>  CI_Lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">out_cogu</span><span class="op">$</span><span class="va">allbirds_prey_sim</span>, <span class="fl">0.025</span><span class="op">)</span><span class="op">)</span>, </span>
<span>  CI_Upper <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">out_cogu</span><span class="op">$</span><span class="va">allbirds_prey_sim</span>, <span class="fl">0.975</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tab_razo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Species <span class="op">=</span> <span class="st">"Razorbill"</span>,</span>
<span>  Estimate <span class="op">=</span> <span class="va">out_razo</span><span class="op">$</span><span class="va">allbirds_prey_est</span>, </span>
<span>  CI_Lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">out_razo</span><span class="op">$</span><span class="va">allbirds_prey_sim</span>, <span class="fl">0.025</span><span class="op">)</span><span class="op">)</span>, </span>
<span>  CI_Upper <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">out_razo</span><span class="op">$</span><span class="va">allbirds_prey_sim</span>, <span class="fl">0.975</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">tab_kitt</span>, <span class="va">tab_cogu</span>, <span class="va">tab_razo</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">2</span>, caption <span class="op">=</span> <span class="st">"Prey consumption mass, kg"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Prey consumption mass, kg</caption>
<thead><tr class="header">
<th align="left">Species</th>
<th align="right">Estimate</th>
<th align="right">CI_Lower</th>
<th align="right">CI_Upper</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Kittiwake</td>
<td align="right">4819894.3</td>
<td align="right">4085681.9</td>
<td align="right">5718792</td>
</tr>
<tr class="even">
<td align="left">Guillemot</td>
<td align="right">5681001.3</td>
<td align="right">4775665.0</td>
<td align="right">9955648</td>
</tr>
<tr class="odd">
<td align="left">Razorbill</td>
<td align="right">718604.3</td>
<td align="right">553496.9</td>
<td align="right">1122483</td>
</tr>
</tbody>
</table>
<p><br></p>
</div>
</div>
<div class="section level3">
<h3 id="view-polygon-extraction-results">
<strong>View polygon extraction results</strong><a class="anchor" aria-label="anchor" href="#view-polygon-extraction-results"></a>
</h3>
<div class="section level5">
<h5 id="the-following-code-produces-a-table-of-the-results-of-the-spatial-extraction-of-prey-consumption-within-polygons--fp_percent-is-the-percentage-of-total-prey-consumption-fp_estimate-is-the-baseline-prey-mass-kg-fp_ci_lower-is-the-lower-confidence-interval-for-prey-mass-kg-2-5-and-fp_ci_upper-is-the-upper-confidence-interval-for-prey-mass-kg-97-5-contained-within-the-polygons-">The following code produces a table of the results of the spatial
extraction of prey consumption within polygons. <em>fp_percent</em> is
the percentage of total prey consumption, <em>fp_Estimate</em> is the
baseline prey mass (kg), <em>fp_CI_Lower</em> is the lower confidence
interval for prey mass (kg, 2.5%), and <em>fp_CI_Upper</em> is the upper
confidence interval for prey mass (kg, 97.5%) contained within the
polygons.<a class="anchor" aria-label="anchor" href="#the-following-code-produces-a-table-of-the-results-of-the-spatial-extraction-of-prey-consumption-within-polygons--fp_percent-is-the-percentage-of-total-prey-consumption-fp_estimate-is-the-baseline-prey-mass-kg-fp_ci_lower-is-the-lower-confidence-interval-for-prey-mass-kg-2-5-and-fp_ci_upper-is-the-upper-confidence-interval-for-prey-mass-kg-97-5-contained-within-the-polygons-"></a>
</h5>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fp_tab_kitt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Species <span class="op">=</span> <span class="st">"Kittiwake"</span>,</span>
<span>  fp_percent <span class="op">=</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/math-generics.html" class="external-link">round</a></span><span class="op">(</span><span class="va">out_kitt</span><span class="op">$</span><span class="va">fp_ud_overlap</span> <span class="op">*</span> <span class="fl">100</span>, <span class="fl">4</span><span class="op">)</span>, <span class="co"># % prey consumption in footprint/s, 4 d.p.</span></span>
<span>  fp_Estimate <span class="op">=</span> <span class="va">out_kitt</span><span class="op">$</span><span class="va">allbirds_prey_fp_est</span>, </span>
<span>  fp_CI_Lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">out_kitt</span><span class="op">$</span><span class="va">allbirds_prey_fp_sim</span>, <span class="fl">0.025</span><span class="op">)</span><span class="op">)</span>, <span class="co"># 2.5%</span></span>
<span>  fp_CI_Upper <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">out_kitt</span><span class="op">$</span><span class="va">allbirds_prey_fp_sim</span>, <span class="fl">0.975</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># 97.5%</span></span>
<span></span>
<span><span class="va">fp_tab_cogu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Species <span class="op">=</span> <span class="st">"Guillemot"</span>,</span>
<span>  fp_percent <span class="op">=</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/math-generics.html" class="external-link">round</a></span><span class="op">(</span><span class="va">out_cogu</span><span class="op">$</span><span class="va">fp_ud_overlap</span> <span class="op">*</span> <span class="fl">100</span>, <span class="fl">4</span><span class="op">)</span>, <span class="co"># % prey consumption in footprint/s, 4 d.p.</span></span>
<span>  fp_Estimate <span class="op">=</span> <span class="va">out_cogu</span><span class="op">$</span><span class="va">allbirds_prey_fp_est</span>, </span>
<span>  fp_CI_Lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">out_cogu</span><span class="op">$</span><span class="va">allbirds_prey_fp_sim</span>, <span class="fl">0.025</span><span class="op">)</span><span class="op">)</span>, <span class="co"># 2.5%</span></span>
<span>  fp_CI_Upper <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">out_cogu</span><span class="op">$</span><span class="va">allbirds_prey_fp_sim</span>, <span class="fl">0.975</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># 97.5%</span></span>
<span></span>
<span><span class="va">fp_tab_razo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Species <span class="op">=</span> <span class="st">"Razorbill"</span>,</span>
<span>  fp_percent <span class="op">=</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/math-generics.html" class="external-link">round</a></span><span class="op">(</span><span class="va">out_razo</span><span class="op">$</span><span class="va">fp_ud_overlap</span> <span class="op">*</span> <span class="fl">100</span>, <span class="fl">4</span><span class="op">)</span>, <span class="co"># % prey consumption in footprint/s, 4 d.p.</span></span>
<span>  fp_Estimate <span class="op">=</span> <span class="va">out_razo</span><span class="op">$</span><span class="va">allbirds_prey_fp_est</span>, </span>
<span>  fp_CI_Lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">out_razo</span><span class="op">$</span><span class="va">allbirds_prey_fp_sim</span>, <span class="fl">0.025</span><span class="op">)</span><span class="op">)</span>, <span class="co"># 2.5%</span></span>
<span>  fp_CI_Upper <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">out_razo</span><span class="op">$</span><span class="va">allbirds_prey_fp_sim</span>, <span class="fl">0.975</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># 97.5%</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">fp_tab_kitt</span>, <span class="va">fp_tab_cogu</span>, <span class="va">fp_tab_razo</span><span class="op">)</span>, digits<span class="op">=</span><span class="fl">1</span>, caption <span class="op">=</span> <span class="st">"Polygon extraction results"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Polygon extraction results</caption>
<thead><tr class="header">
<th align="left">Species</th>
<th align="right">fp_percent</th>
<th align="right">fp_Estimate</th>
<th align="right">fp_CI_Lower</th>
<th align="right">fp_CI_Upper</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Kittiwake</td>
<td align="right">7.0</td>
<td align="right">336915.8</td>
<td align="right">285593.6</td>
<td align="right">399749.7</td>
</tr>
<tr class="even">
<td align="left">Guillemot</td>
<td align="right">4.3</td>
<td align="right">243174.5</td>
<td align="right">204421.7</td>
<td align="right">426150.2</td>
</tr>
<tr class="odd">
<td align="left">Razorbill</td>
<td align="right">3.2</td>
<td align="right">23257.7</td>
<td align="right">17914.0</td>
<td align="right">36329.3</td>
</tr>
</tbody>
</table>
<p><br><br><br></p>
<hr>
</div>
</div>
</div>
<div class="section level2">
<h2 id="mis-specification-of-inputs">
<strong>Mis-specification of inputs</strong><a class="anchor" aria-label="anchor" href="#mis-specification-of-inputs"></a>
</h2>
<div class="section level5">
<h5 id="spmapper-performs-checks-for-potential-input-specification-errors--the-following-examples-illustrate-the-error-messages-produced-under-cases-of-mis-specification-">
<em>spmapper</em> performs checks for potential input specification
errors. The following examples illustrate the error messages produced
under cases of mis-specification.<a class="anchor" aria-label="anchor" href="#spmapper-performs-checks-for-potential-input-specification-errors--the-following-examples-illustrate-the-error-messages-produced-under-cases-of-mis-specification-"></a>
</h5>
<p><br></p>
</div>
<div class="section level4">
<h4 id="incorrect-species-name">Incorrect species name<a class="anchor" aria-label="anchor" href="#incorrect-species-name"></a>
</h4>
<div class="section level5">
<h5 id="spmapper-explicitly-checks-whether-the-provided-species-names-are-valid-including-capitalisation-">
<em>spmapper</em> explicitly checks whether the provided species
names are valid (including capitalisation).<a class="anchor" aria-label="anchor" href="#spmapper-explicitly-checks-whether-the-provided-species-names-are-valid-including-capitalisation-"></a>
</h5>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/spmapper.html">spmapper</a></span><span class="op">(</span>spname <span class="op">=</span> <span class="st">"kittiwake"</span>, fppolys <span class="op">=</span> <span class="va">fppolys</span>, tooldir <span class="op">=</span> <span class="va">tooldir</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Error in spmapper(spname = "kittiwake", fppolys = fppolys, tooldir = tooldir): Invalid species name: must be 'Kittiwake', 'Guillemot' or 'Razorbill'!</span></span></code></pre>
<p><br></p>
</div>
</div>
<div class="section level4">
<h4 id="incorrect-path-to-tool">Incorrect path to tool<a class="anchor" aria-label="anchor" href="#incorrect-path-to-tool"></a>
</h4>
<div class="section level5">
<h5 id="spmapper-does-not-currently-explicitly-check-if-the-path-provided-is-correctvalid-but-may-yield-sensible-error-messages-if-an-incorrect-path-is-specified-">
<em>spmapper</em> does not currently explicitly check if the path
provided is correct/valid, but may yield sensible error messages if an
incorrect path is specified.<a class="anchor" aria-label="anchor" href="#spmapper-does-not-currently-explicitly-check-if-the-path-provided-is-correctvalid-but-may-yield-sensible-error-messages-if-an-incorrect-path-is-specified-"></a>
</h5>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/spmapper.html">spmapper</a></span><span class="op">(</span>spname <span class="op">=</span> <span class="st">"Kittiwake"</span>, fppolys <span class="op">=</span> <span class="va">fppolys</span>, tooldir <span class="op">=</span> <span class="st">"test"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in file(file, "rt"): cannot open file 'test/fame_population_ests.csv':</span></span>
<span><span class="co">## No such file or directory</span></span></code></pre>
<pre><code><span><span class="co">## Error in file(file, "rt"): cannot open the connection</span></span></code></pre>
<p><br></p>
</div>
</div>
<div class="section level3">
<h3 id="validity-of-footprints">Validity of footprints<a class="anchor" aria-label="anchor" href="#validity-of-footprints"></a>
</h3>
<div class="section level5">
<h5 id="the-tool-does-not-check-directly-for-the-validity-of-the-polygons-provided-but-does-run-three-checks-for-consistency-between-polygons-and-the-prey-consumption-maps--spmapplot-can-be-used-to-visualise-polygons-overlaid-on-the-prey-consumption-maps-">The tool does not check directly for the validity of the polygons
provided, but does run three checks for consistency between polygons and
the prey consumption maps. <em>spmapplot()</em> can be used to visualise
polygons overlaid on the prey consumption maps.<a class="anchor" aria-label="anchor" href="#the-tool-does-not-check-directly-for-the-validity-of-the-polygons-provided-but-does-run-three-checks-for-consistency-between-polygons-and-the-prey-consumption-maps--spmapplot-can-be-used-to-visualise-polygons-overlaid-on-the-prey-consumption-maps-"></a>
</h5>
<p><br></p>
</div>
<div class="section level4">
<h4 id="footprints-on-land-or-in-other-areas-of-map-without-values">1. Footprints on land (or in other areas of map without values)<a class="anchor" aria-label="anchor" href="#footprints-on-land-or-in-other-areas-of-map-without-values"></a>
</h4>
<p><img src="spmapper-worked-example_files/figure-html/unnamed-chunk-16-1.png" width="80%"></p>
<pre><code><span><span class="co">## |---------|---------|---------|---------|=========================================                                          </span></span></code></pre>
<pre><code><span><span class="co">## Error in fpudoverlap(fppolys = fppolys, udmap = udmap): Zero overlap between footprint and any grid cell</span></span></code></pre>
<p><br></p>
</div>
<div class="section level4">
<h4 id="footprints-smaller-than-one-grid-cell">2. Footprints smaller than one grid cell<a class="anchor" aria-label="anchor" href="#footprints-smaller-than-one-grid-cell"></a>
</h4>
<p><img src="spmapper-worked-example_files/figure-html/unnamed-chunk-17-1.png" width="80%"></p>
<pre><code><span><span class="co">## Error in fpudoverlap(fppolys = fppolys, udmap = udmap): Size of footprint is smaller than the size of a single grid cell - tool would not produce meaningful results in this situation</span></span></code></pre>
<p><br></p>
</div>
<div class="section level4">
<h4 id="footprints-outside-extent-of-prey-consumption-maps">3. Footprints outside extent of prey consumption maps<a class="anchor" aria-label="anchor" href="#footprints-outside-extent-of-prey-consumption-maps"></a>
</h4>
<div class="section level5">
<h5 id="note-this-may-be-footprints-on-land-but-it-could-also-be-footprints-in-areas-that-are-within-extent-but-in-areas-that-werent-included-in-the-original-modelling-in-wakefield-et-al--2017-">Note: this may be footprints on land, but it could also be
footprints in areas that are within extent but in areas that weren’t
included in the original modelling in Wakefield et al. (2017).<a class="anchor" aria-label="anchor" href="#note-this-may-be-footprints-on-land-but-it-could-also-be-footprints-in-areas-that-are-within-extent-but-in-areas-that-werent-included-in-the-original-modelling-in-wakefield-et-al--2017-"></a>
</h5>
<p><img src="spmapper-worked-example_files/figure-html/unnamed-chunk-18-1.png" width="80%"></p>
<pre><code><span><span class="co">## Error in fpudoverlap(fppolys = fppolys, udmap = udmap): Polygon lies partly or completely outside area of selected grid!</span></span></code></pre>
<p><br><br></p>
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Oliver Leedham, Kate Searle, Claudia Caporusso, Francis Daunt, Adam Butler.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
