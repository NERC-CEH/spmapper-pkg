<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Worked example for 'spmapper' • spmapper</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Worked example for 'spmapper'">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">spmapper</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/spmapper-worked-example.html">Worked example for 'spmapper'</a>
    </li>
    <li>
      <a href="../articles/spmapper_caveats_limitation.html">*spmapper*: uses, caveats &amp; limitations</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Worked example for ‘spmapper’</h1>
            
            <h4 data-toc-skip class="date">2025-05-20</h4>
      

      <div class="hidden name"><code>spmapper-worked-example.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="load-packages-and-functions">Load packages and functions<a class="anchor" aria-label="anchor" href="#load-packages-and-functions"></a>
</h2>
<pre><code><span><span class="co">#&gt; Warning: package 'terra' was built under R version 4.4.3</span></span>
<span><span class="co">#&gt; terra 1.8.42</span></span>
<span><span class="co">#&gt; Warning: package 'sf' was built under R version 4.4.3</span></span>
<span><span class="co">#&gt; Linking to GEOS 3.13.0, GDAL 3.10.1, PROJ 9.5.1; sf_use_s2() is TRUE</span></span>
<span><span class="co">#&gt; Warning: package 'knitr' was built under R version 4.4.2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'knitr'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:terra':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     spin</span></span>
<span><span class="co">#&gt; Warning: package 'rnaturalearth' was built under R version 4.4.2</span></span>
<span><span class="co">#&gt; Loading required package: viridisLite</span></span>
<span><span class="co">#&gt; Warning: package 'ggplot2' was built under R version 4.4.3</span></span>
<span><span class="co">#&gt; Warning: package 'patchwork' was built under R version 4.4.1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'patchwork'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:terra':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     area</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; [1] ""</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="worked-example---nng-and-berwick-bank">Worked example - NnG and Berwick Bank<a class="anchor" aria-label="anchor" href="#worked-example---nng-and-berwick-bank"></a>
</h2>
<div class="section level3">
<h3 id="user-specified-polygons-to-use-in-example">User specified polygon(s) to use in example<a class="anchor" aria-label="anchor" href="#user-specified-polygons-to-use-in-example"></a>
</h3>
<p>NOTE: TEMPORARY</p>
<pre><code><span><span class="co">#&gt; Reading layer `windfarmspolyPolygon' from data source </span></span>
<span><span class="co">#&gt;   `C:\Users\clacap\AppData\Local\Temp\RtmpsPSo2u\temp_libpath44e031276f7c\spmapper\demo\UK_OWF_polygons_by_status' </span></span>
<span><span class="co">#&gt;   using driver `ESRI Shapefile'</span></span>
<span><span class="co">#&gt; Simple feature collection with 405 features and 9 fields</span></span>
<span><span class="co">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -10.14933 ymin: 45.70603 xmax: 15.16667 ymax: 60.70146</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; Spherical geometry (s2) switched off</span></span>
<span><span class="co">#&gt; Coordinate system already present. Adding new coordinate system, which will</span></span>
<span><span class="co">#&gt; replace the existing one.</span></span></code></pre>
<p><img src="spmapper-worked-example_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="run-tool-for-each-species">Run tool for each species<a class="anchor" aria-label="anchor" href="#run-tool-for-each-species"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out_kitt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spmapper.html">spmapper</a></span><span class="op">(</span>spname <span class="op">=</span> <span class="st">"Kittiwake"</span>, fppolys <span class="op">=</span> <span class="va">fppolys</span>, popscen <span class="op">=</span> <span class="st">"baseline"</span>, tooldir <span class="op">=</span> <span class="va">tooldir</span><span class="op">)</span></span>
<span><span class="co">#&gt; |---------|---------|---------|---------|=========================================                                          </span></span>
<span></span>
<span><span class="va">out_cogu</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spmapper.html">spmapper</a></span><span class="op">(</span>spname <span class="op">=</span> <span class="st">"Guillemot"</span>, fppolys <span class="op">=</span> <span class="va">fppolys</span>, popscen <span class="op">=</span> <span class="st">"baseline"</span>, tooldir <span class="op">=</span> <span class="va">tooldir</span><span class="op">)</span></span>
<span><span class="co">#&gt; |---------|---------|---------|---------|=========================================                                          </span></span>
<span></span>
<span><span class="va">out_razo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spmapper.html">spmapper</a></span><span class="op">(</span>spname <span class="op">=</span> <span class="st">"Razorbill"</span>, fppolys <span class="op">=</span> <span class="va">fppolys</span>, popscen <span class="op">=</span> <span class="st">"baseline"</span>, tooldir <span class="op">=</span> <span class="va">tooldir</span><span class="op">)</span></span>
<span><span class="co">#&gt; |---------|---------|---------|---------|=========================================                                          </span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="show-ud-map">Show UD map<a class="anchor" aria-label="anchor" href="#show-ud-map"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span>  <span class="co"># bottom, left, top, right</span></span>
<span><span class="op">(</span><span class="fu"><a href="../reference/spmapplot.html">spmapplot</a></span><span class="op">(</span><span class="va">out_kitt</span><span class="op">$</span><span class="va">prey_cons_map</span>, <span class="va">fppolys</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"Kittiwake"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="op">(</span><span class="fu"><a href="../reference/spmapplot.html">spmapplot</a></span><span class="op">(</span><span class="va">out_cogu</span><span class="op">$</span><span class="va">prey_cons_map</span>, <span class="va">fppolys</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"Guillemot"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="op">(</span><span class="fu"><a href="../reference/spmapplot.html">spmapplot</a></span><span class="op">(</span><span class="va">out_razo</span><span class="op">$</span><span class="va">prey_cons_map</span>, <span class="va">fppolys</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"Razorbill"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">patchwork</span><span class="fu">::</span><span class="fu"><a href="https://patchwork.data-imaginist.com/reference/plot_layout.html" class="external-link">plot_layout</a></span><span class="op">(</span>ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Coordinate system already present. Adding new coordinate system, which will</span></span>
<span><span class="co">#&gt; replace the existing one.</span></span>
<span><span class="co">#&gt; Coordinate system already present. Adding new coordinate system, which will</span></span>
<span><span class="co">#&gt; replace the existing one.</span></span>
<span><span class="co">#&gt; Coordinate system already present. Adding new coordinate system, which will</span></span>
<span><span class="co">#&gt; replace the existing one.</span></span></code></pre></div>
<p><img src="spmapper-worked-example_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># SPACING ISSUE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="visualize-outputs">Visualize outputs<a class="anchor" aria-label="anchor" href="#visualize-outputs"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span>  <span class="co"># bottom, left, top, right</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">out_kitt</span><span class="op">$</span><span class="va">allbirds_prey_sim</span>, breaks<span class="op">=</span><span class="fl">50</span>, col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/grDevices/gray.html" class="external-link">gray</a></span><span class="op">(</span><span class="fl">0.6</span><span class="op">)</span>, main<span class="op">=</span><span class="st">"Kittiwake"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">out_kitt</span><span class="op">$</span><span class="va">allbirds_prey_est</span>,<span class="fl">2</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">10000</span><span class="op">)</span>,lwd<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">out_cogu</span><span class="op">$</span><span class="va">allbirds_prey_sim</span>, breaks<span class="op">=</span><span class="fl">50</span>, col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/grDevices/gray.html" class="external-link">gray</a></span><span class="op">(</span><span class="fl">0.6</span><span class="op">)</span>, main<span class="op">=</span><span class="st">"Guillemot"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">out_cogu</span><span class="op">$</span><span class="va">allbirds_prey_est</span>,<span class="fl">2</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">10000</span><span class="op">)</span>,lwd<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">out_razo</span><span class="op">$</span><span class="va">allbirds_prey_sim</span>, breaks<span class="op">=</span><span class="fl">50</span>, col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/grDevices/gray.html" class="external-link">gray</a></span><span class="op">(</span><span class="fl">0.6</span><span class="op">)</span>, main<span class="op">=</span><span class="st">"Razorbill"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">out_razo</span><span class="op">$</span><span class="va">allbirds_prey_est</span>,<span class="fl">2</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">10000</span><span class="op">)</span>,lwd<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p><img src="spmapper-worked-example_files/figure-html/unnamed-chunk-5-1.png" width="50%"></p>
</div>
<div class="section level3">
<h3 id="tables">Tables<a class="anchor" aria-label="anchor" href="#tables"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html" class="external-link">dev.off</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; null device </span></span>
<span><span class="co">#&gt;           1</span></span>
<span><span class="va">tab_kitt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Species <span class="op">=</span> <span class="st">"Kittiwake"</span>,</span>
<span>  Estimate <span class="op">=</span> <span class="va">out_kitt</span><span class="op">$</span><span class="va">allbirds_prey_est</span>, </span>
<span>  Sim_CI_Lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">out_kitt</span><span class="op">$</span><span class="va">allbirds_prey_sim</span>, <span class="fl">0.025</span><span class="op">)</span><span class="op">)</span>, </span>
<span>  Sim_Mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">out_kitt</span><span class="op">$</span><span class="va">allbirds_prey_sim</span><span class="op">)</span>, </span>
<span>  Sim_CI_Upper <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">out_kitt</span><span class="op">$</span><span class="va">allbirds_prey_sim</span>, <span class="fl">0.975</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tab_cogu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Species <span class="op">=</span> <span class="st">"Guillemot"</span>,</span>
<span>  Estimate <span class="op">=</span> <span class="va">out_cogu</span><span class="op">$</span><span class="va">allbirds_prey_est</span>, </span>
<span>  Sim_CI_Lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">out_cogu</span><span class="op">$</span><span class="va">allbirds_prey_sim</span>, <span class="fl">0.025</span><span class="op">)</span><span class="op">)</span>, </span>
<span>  Sim_Mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">out_cogu</span><span class="op">$</span><span class="va">allbirds_prey_sim</span><span class="op">)</span>, </span>
<span>  Sim_CI_Upper <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">out_cogu</span><span class="op">$</span><span class="va">allbirds_prey_sim</span>, <span class="fl">0.975</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tab_razo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Species <span class="op">=</span> <span class="st">"Razorbill"</span>,</span>
<span>  Estimate <span class="op">=</span> <span class="va">out_razo</span><span class="op">$</span><span class="va">allbirds_prey_est</span>, </span>
<span>  Sim_CI_Lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">out_razo</span><span class="op">$</span><span class="va">allbirds_prey_sim</span>, <span class="fl">0.025</span><span class="op">)</span><span class="op">)</span>, </span>
<span>  Sim_Mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">out_razo</span><span class="op">$</span><span class="va">allbirds_prey_sim</span><span class="op">)</span>, </span>
<span>  Sim_CI_Upper <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">out_razo</span><span class="op">$</span><span class="va">allbirds_prey_sim</span>, <span class="fl">0.975</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">kable</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">tab_kitt</span>, <span class="va">tab_cogu</span>, <span class="va">tab_razo</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Species</th>
<th align="right">Estimate</th>
<th align="right">Sim_CI_Lower</th>
<th align="right">Sim_Mean</th>
<th align="right">Sim_CI_Upper</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Kittiwake</td>
<td align="right">5153.6237</td>
<td align="right">4368.5744</td>
<td align="right">5193.7932</td>
<td align="right">6114.7608</td>
</tr>
<tr class="even">
<td align="left">Guillemot</td>
<td align="right">3785.4276</td>
<td align="right">3182.1739</td>
<td align="right">4497.0923</td>
<td align="right">6633.7576</td>
</tr>
<tr class="odd">
<td align="left">Razorbill</td>
<td align="right">226.9996</td>
<td align="right">174.8439</td>
<td align="right">248.3529</td>
<td align="right">354.5807</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="testing-mis-specification-of-inputs">Testing mis-specification of inputs<a class="anchor" aria-label="anchor" href="#testing-mis-specification-of-inputs"></a>
</h2>
<div class="section level3">
<h3 id="incorrect-species-name">Incorrect species name<a class="anchor" aria-label="anchor" href="#incorrect-species-name"></a>
</h3>
<p>The tool explicitly checks whether the provided species names are
valid (including capitalisation)</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/spmapper.html">spmapper</a></span><span class="op">(</span>spname <span class="op">=</span> <span class="st">"kittiwake"</span>, fppolys <span class="op">=</span> <span class="va">fppolys</span>, popscen <span class="op">=</span> <span class="st">"baseline"</span>, tooldir <span class="op">=</span> <span class="va">tooldir</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in spmapper(spname = "kittiwake", fppolys = fppolys, popscen = "baseline", : Invalid species name: must be 'Kittiwake', 'Guillemot' or 'Razorbill'!</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="incorrect-population-scenario">Incorrect population scenario<a class="anchor" aria-label="anchor" href="#incorrect-population-scenario"></a>
</h3>
<p>The tool explicitly checks whether the provided scenario names are
valid (including capitalisation)</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/spmapper.html">spmapper</a></span><span class="op">(</span>spname <span class="op">=</span> <span class="st">"Kittiwake"</span>, fppolys <span class="op">=</span> <span class="va">fppolys</span>, popscen <span class="op">=</span> <span class="st">"medium"</span>, tooldir <span class="op">=</span> <span class="va">tooldir</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in spmapper(spname = "Kittiwake", fppolys = fppolys, popscen = "medium", : Invalid population scenario: must be 'low', 'baseline' or 'high'</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="incorrect-path-to-tool">Incorrect path to tool<a class="anchor" aria-label="anchor" href="#incorrect-path-to-tool"></a>
</h3>
<p>The tool does not currently explicitly check if the path provided is
correct/valid, but seems to yield a fairly sensible error messages if an
incorrect path is specified</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/spmapper.html">spmapper</a></span><span class="op">(</span>spname <span class="op">=</span> <span class="st">"Kittiwake"</span>, fppolys <span class="op">=</span> <span class="va">fppolys</span>, popscen <span class="op">=</span> <span class="st">"baseline"</span>, tooldir <span class="op">=</span> <span class="st">"test"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in file(file, "rt"): cannot open file 'test/fame_population_ests.csv':</span></span>
<span><span class="co">#&gt; No such file or directory</span></span>
<span><span class="co">#&gt; Error in file(file, "rt"): cannot open the connection</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="validity-of-footprints">Validity of footprints<a class="anchor" aria-label="anchor" href="#validity-of-footprints"></a>
</h3>
<p>The tool does not check directly for the validity of the polygons
provided</p>
</div>
<div class="section level3">
<h3 id="inconsistencies-between-footprint-polygons-and-uds">Inconsistencies between footprint polygons and UDs<a class="anchor" aria-label="anchor" href="#inconsistencies-between-footprint-polygons-and-uds"></a>
</h3>
<p>The tool runs three checks for consistency between polygons and the
UD map</p>
<div class="section level4">
<h4 id="footprints-smaller-than-one-grid-cell">Footprints smaller than one grid cell<a class="anchor" aria-label="anchor" href="#footprints-smaller-than-one-grid-cell"></a>
</h4>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#fppolys &lt;- sf::st_read(file.path(tooldir, "ExampleData", "North_Sea_OWF_2030_polygons"))</span></span>
<span><span class="va">fppolys</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"demo/North_Sea_OWF_2030_polygons"</span>, package <span class="op">=</span> <span class="st">"spmapper"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Reading layer `North_Sea_OWF_2030_polygons' from data source </span></span>
<span><span class="co">#&gt;   `C:\Users\clacap\AppData\Local\Temp\RtmpsPSo2u\temp_libpath44e031276f7c\spmapper\demo\North_Sea_OWF_2030_polygons' </span></span>
<span><span class="co">#&gt;   using driver `ESRI Shapefile'</span></span>
<span><span class="co">#&gt; Simple feature collection with 177 features and 4 fields</span></span>
<span><span class="co">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -269946.2 ymin: -4249826 xmax: 697913.1 ymax: -3159479</span></span>
<span><span class="co">#&gt; Projected CRS: North_Pole_Lambert_Azimuthal_Equal_Area</span></span>
<span><span class="va">fppolys</span> <span class="op">&lt;-</span> <span class="va">fppolys</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.min.html" class="external-link">which.min</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_measures.html" class="external-link">st_area</a></span><span class="op">(</span><span class="va">fppolys</span><span class="op">)</span><span class="op">)</span>,<span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="../reference/spmapper.html">spmapper</a></span><span class="op">(</span>spname <span class="op">=</span> <span class="st">"Kittiwake"</span>, fppolys <span class="op">=</span> <span class="va">fppolys</span>, popscen <span class="op">=</span> <span class="st">"baseline"</span>, tooldir <span class="op">=</span> <span class="va">tooldir</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in fpudoverlap(fppolys = fppolys, udmap = udmap): Size of footprint is smaller than the size of a single grid cell - tool would not produce meaningful results in this situation</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="footprints-outside-extent-of-ud">Footprints outside extent of UD<a class="anchor" aria-label="anchor" href="#footprints-outside-extent-of-ud"></a>
</h4>
<p>Note: the extent of the UD maps varies between species</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#fppolys &lt;- sf::st_read(file.path(tooldir, "ExampleData", "North_Sea_OWF_2030_polygons"))</span></span>
<span><span class="va">fppolys</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"demo/North_Sea_OWF_2030_polygons"</span>, package <span class="op">=</span> <span class="st">"spmapper"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Reading layer `North_Sea_OWF_2030_polygons' from data source </span></span>
<span><span class="co">#&gt;   `C:\Users\clacap\AppData\Local\Temp\RtmpsPSo2u\temp_libpath44e031276f7c\spmapper\demo\North_Sea_OWF_2030_polygons' </span></span>
<span><span class="co">#&gt;   using driver `ESRI Shapefile'</span></span>
<span><span class="co">#&gt; Simple feature collection with 177 features and 4 fields</span></span>
<span><span class="co">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -269946.2 ymin: -4249826 xmax: 697913.1 ymax: -3159479</span></span>
<span><span class="co">#&gt; Projected CRS: North_Pole_Lambert_Azimuthal_Equal_Area</span></span>
<span></span>
<span><span class="va">fppolys</span> <span class="op">&lt;-</span> <span class="va">fppolys</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="../reference/spmapper.html">spmapper</a></span><span class="op">(</span>spname <span class="op">=</span> <span class="st">"Guillemot"</span>, fppolys <span class="op">=</span> <span class="va">fppolys</span>, popscen <span class="op">=</span> <span class="st">"baseline"</span>, tooldir <span class="op">=</span> <span class="va">tooldir</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in fpudoverlap(fppolys = fppolys, udmap = udmap): Polygon lies partly or completely outside area of selected grid!</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="footprints-on-land-or-in-other-areas-of-map-without-values">Footprints on land (or in other areas of map without values)<a class="anchor" aria-label="anchor" href="#footprints-on-land-or-in-other-areas-of-map-without-values"></a>
</h4>
<p>Note: this may be footprints on land, but it could also be footprints
in areas that are within extent but have missing values as weren’t
included in the original modelling in Wakefield et al. (2017)</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#fppolys &lt;- sf::st_read(file.path(tooldir, "ExampleData", "North_Sea_OWF_2030_polygons"))</span></span>
<span><span class="va">fppolys</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"demo/North_Sea_OWF_2030_polygons"</span>, package <span class="op">=</span> <span class="st">"spmapper"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Reading layer `North_Sea_OWF_2030_polygons' from data source </span></span>
<span><span class="co">#&gt;   `C:\Users\clacap\AppData\Local\Temp\RtmpsPSo2u\temp_libpath44e031276f7c\spmapper\demo\North_Sea_OWF_2030_polygons' </span></span>
<span><span class="co">#&gt;   using driver `ESRI Shapefile'</span></span>
<span><span class="co">#&gt; Simple feature collection with 177 features and 4 fields</span></span>
<span><span class="co">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -269946.2 ymin: -4249826 xmax: 697913.1 ymax: -3159479</span></span>
<span><span class="co">#&gt; Projected CRS: North_Pole_Lambert_Azimuthal_Equal_Area</span></span>
<span></span>
<span><span class="va">fppolys</span> <span class="op">&lt;-</span> <span class="va">fppolys</span><span class="op">[</span><span class="fl">155</span>,<span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="../reference/spmapper.html">spmapper</a></span><span class="op">(</span>spname <span class="op">=</span> <span class="st">"Guillemot"</span>, fppolys <span class="op">=</span> <span class="va">fppolys</span>, popscen <span class="op">=</span> <span class="st">"baseline"</span>, tooldir <span class="op">=</span> <span class="va">tooldir</span><span class="op">)</span></span>
<span><span class="co">#&gt; |---------|---------|---------|---------|=========================================                                          </span></span>
<span><span class="co">#&gt; Error in fpudoverlap(fppolys = fppolys, udmap = udmap): Part or all of footprint lies on land or outside area with UD values!</span></span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by First Last.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
